<!doctype html><html lang=zh dir=auto>
<head><meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge">
<meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no">
<meta name=robots content="index, follow">
<title>什么是量化交易-暨驳斥近期网络上关于要打击量化的反智言论 | MuggleWei</title>
<meta name=keywords content="交易">
<meta name=description content="近期(2024-06-30)的 A 股又出现一波流畅的下跌走势，关于打击量化的反智言论再次充斥网络，比如
 集思录的帖子: 大家觉得量化是不是直接禁掉得了？ 以及政法大学刘纪鹏教授建议：暂停量化交易  这些帖子/视频连基本的事实概念都分不清(甚至无法分清量化交易、程序化交易、算法交易和高频交易是不同的概念)，却能言之凿凿的说为了广大投资者应该停止量化交易，实在令人啼笑皆非。而这些本该令人一笑了之的言论却有着大量的拥趸，实在很难令人置之不理。
所以这篇文章的目的是希望能做一个基础的科普，让大家能够对量化交易有一个简单的认识。
什么是量化 量化交易，顾名思义，就是以量化的方法来进行交易活动，那么什么是量化呢？其实理工科的学生肯定不会陌生，这里节选 2004 人教版高一物理课本的前言为大家释义：
 一天在树下玩耍，一只熟透了的苹果掉下来，他们就辩论起来：苹果是不是越落越快？不过他们很快就达成一致：是的，苹果越落越快。
紫珠说：“只说苹果越落越快，没什么了不起，谁能说出苹果下落怎么个越落越快法？”
黑柱说：“苹果越落越快，就是它的速度正比于落下的距离呗！”
白胖说：“我看是苹果的速度正比于落下的时间”
孩子们七嘴八舌，天色已晚，黄娃建议明天到游戏场去做实验，于是大家就散伙回家了。
&mldr;&mldr;
第二天，老师带孩子们到实验室，通过‘闪频仪’来记录小球下落每隔一定时间间隔的位置，通过实验数据记录，蓝仔发现规律并说：“其实我是吸取了白胖的想法，速度正比于走过的时间”
设第 1 秒末速度为 v，初速度为 0，所以平均速度为 v/2，走过的距离为 v/2 * 1 秒
第 2 秒末速度为 2v，初速度为 v，所以平均速度为 3v/2，走过的距离为 3v/2 * 1 秒
第 3 秒末速度为 3v，初速度为 2v，所以平均速度为 5v/2，走过的距离为 5v/2 * 1 秒
依此类推，为了取整数，可令 v = 2，于是小球在相继各秒下落距离之比就是 1:3:5:7:9:&mldr;，如果从零线起算各秒末的总路程，那就是整数的平方 1:4:9:16:25:&mldr;
&mldr;&mldr;
“物理学是探索自然界最基本、最普遍规律的科学，物理学的一般探索过程是通过观察和实验积累经验，在经验事实的基础上建立物理模型，提出(往往是猜测出)简洁的物理规律(物理学要求这些规律是定量化的，也就是用公式或数学表达的)，可用它们去预言未知现象，再用新的实验去检验这些物理模型和物理规律，去否定或进一步修正它们。”
 好了，通过上面短文，我们可以知道什么是量化，所以只有你有可量化的策略，并且按照策略去执行，都可以定义为量化交易。并且核心思想也是和物理实验一模一样，先提出假设(定性)，接着将其公式化(量化)，紧接着是实验(回测)，接着根据实验结果否定或进一步修正。
而且看到这里，相信你也就可以理解，为什么无论是国内的量化私募，还是国外的对冲基金都喜欢数学和物理专业的学生。
一个简单的量化策略 定性 很好，上面我们已经解释了量化这个词，那么现在我有了一个想法: 买入市场中的蓝筹股，忽略短期波动，始终满仓持有，那么拉长时间看，我能获取超过银行定期存款的利率。
量化 上面这段假设，我们可以将其理解为定性分析，为了对其进行实验，我们要对其进行定量。首先我们要确定取哪一年的多长的周期的定期存款利率，取次要定义什么是蓝筹股。
由于定期存款利率是实时变化的，我们不妨取近五年内，十年期国债收益率的月末收盘价最高值，即: 3.">
<meta name=author content>
<link rel=canonical href=https://mugglewei.github.io/posts/%E4%BB%80%E4%B9%88%E6%98%AF%E9%87%8F%E5%8C%96%E4%BA%A4%E6%98%93/>
<link crossorigin=anonymous href=/assets/css/stylesheet.min.db09490ee4b2c4f488e4d5dbd5a258b57843f1f0a90e1ee0cbdac9c48db3b31f.css integrity="sha256-2wlJDuSyxPSI5NXb1aJYtXhD8fCpDh7gy9rJxI2zsx8=" rel="preload stylesheet" as=style>
<script defer crossorigin=anonymous src=/assets/js/highlight.min.7680afc38aa6b15ddf158a4f3780b7b1f7dde7e91d26f073e6229bb7a0793c92.js integrity="sha256-doCvw4qmsV3fFYpPN4C3sffd5+kdJvBz5iKbt6B5PJI=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://mugglewei.github.io/favicon.ico>
<link rel=icon type=image/png sizes=16x16 href=https://mugglewei.github.io/favicon-16x16.png>
<link rel=icon type=image/png sizes=32x32 href=https://mugglewei.github.io/favicon-32x32.png>
<link rel=apple-touch-icon href=https://mugglewei.github.io/apple-touch-icon.png>
<link rel=mask-icon href=https://mugglewei.github.io/safari-pinned-tab.svg>
<meta name=theme-color content="#2e2e33">
<meta name=msapplication-TileColor content="#2e2e33">
<meta name=generator content="Hugo 0.91.2">
<noscript>
<style>#theme-toggle,.top-link{display:none}</style>
<style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style>
</noscript><link rel=stylesheet href=/customize/style.css>
<link rel=stylesheet href=/katex@0.15.2/katex.min.css crossorigin=anonymous>
<script defer src=/katex@0.15.2/katex.min.js crossorigin=anonymous></script>
<script>katexDelimiters={delimiters:[{left:'$$',right:'$$',display:!0},{left:'$',right:'$',display:!1},{left:'\\(',right:'\\)',display:!1}],throwOnError:!1}</script>
<script defer src=/katex@0.15.2/contrib/auto-render.min.js crossorigin=anonymous onload=renderMathInElement(document.body,katexDelimiters)></script>
<meta property="og:title" content="什么是量化交易-暨驳斥近期网络上关于要打击量化的反智言论">
<meta property="og:description" content="近期(2024-06-30)的 A 股又出现一波流畅的下跌走势，关于打击量化的反智言论再次充斥网络，比如
 集思录的帖子: 大家觉得量化是不是直接禁掉得了？ 以及政法大学刘纪鹏教授建议：暂停量化交易  这些帖子/视频连基本的事实概念都分不清(甚至无法分清量化交易、程序化交易、算法交易和高频交易是不同的概念)，却能言之凿凿的说为了广大投资者应该停止量化交易，实在令人啼笑皆非。而这些本该令人一笑了之的言论却有着大量的拥趸，实在很难令人置之不理。
所以这篇文章的目的是希望能做一个基础的科普，让大家能够对量化交易有一个简单的认识。
什么是量化 量化交易，顾名思义，就是以量化的方法来进行交易活动，那么什么是量化呢？其实理工科的学生肯定不会陌生，这里节选 2004 人教版高一物理课本的前言为大家释义：
 一天在树下玩耍，一只熟透了的苹果掉下来，他们就辩论起来：苹果是不是越落越快？不过他们很快就达成一致：是的，苹果越落越快。
紫珠说：“只说苹果越落越快，没什么了不起，谁能说出苹果下落怎么个越落越快法？”
黑柱说：“苹果越落越快，就是它的速度正比于落下的距离呗！”
白胖说：“我看是苹果的速度正比于落下的时间”
孩子们七嘴八舌，天色已晚，黄娃建议明天到游戏场去做实验，于是大家就散伙回家了。
&mldr;&mldr;
第二天，老师带孩子们到实验室，通过‘闪频仪’来记录小球下落每隔一定时间间隔的位置，通过实验数据记录，蓝仔发现规律并说：“其实我是吸取了白胖的想法，速度正比于走过的时间”
设第 1 秒末速度为 v，初速度为 0，所以平均速度为 v/2，走过的距离为 v/2 * 1 秒
第 2 秒末速度为 2v，初速度为 v，所以平均速度为 3v/2，走过的距离为 3v/2 * 1 秒
第 3 秒末速度为 3v，初速度为 2v，所以平均速度为 5v/2，走过的距离为 5v/2 * 1 秒
依此类推，为了取整数，可令 v = 2，于是小球在相继各秒下落距离之比就是 1:3:5:7:9:&mldr;，如果从零线起算各秒末的总路程，那就是整数的平方 1:4:9:16:25:&mldr;
&mldr;&mldr;
“物理学是探索自然界最基本、最普遍规律的科学，物理学的一般探索过程是通过观察和实验积累经验，在经验事实的基础上建立物理模型，提出(往往是猜测出)简洁的物理规律(物理学要求这些规律是定量化的，也就是用公式或数学表达的)，可用它们去预言未知现象，再用新的实验去检验这些物理模型和物理规律，去否定或进一步修正它们。”
 好了，通过上面短文，我们可以知道什么是量化，所以只有你有可量化的策略，并且按照策略去执行，都可以定义为量化交易。并且核心思想也是和物理实验一模一样，先提出假设(定性)，接着将其公式化(量化)，紧接着是实验(回测)，接着根据实验结果否定或进一步修正。
而且看到这里，相信你也就可以理解，为什么无论是国内的量化私募，还是国外的对冲基金都喜欢数学和物理专业的学生。
一个简单的量化策略 定性 很好，上面我们已经解释了量化这个词，那么现在我有了一个想法: 买入市场中的蓝筹股，忽略短期波动，始终满仓持有，那么拉长时间看，我能获取超过银行定期存款的利率。
量化 上面这段假设，我们可以将其理解为定性分析，为了对其进行实验，我们要对其进行定量。首先我们要确定取哪一年的多长的周期的定期存款利率，取次要定义什么是蓝筹股。
由于定期存款利率是实时变化的，我们不妨取近五年内，十年期国债收益率的月末收盘价最高值，即: 3.">
<meta property="og:type" content="article">
<meta property="og:url" content="https://mugglewei.github.io/posts/%E4%BB%80%E4%B9%88%E6%98%AF%E9%87%8F%E5%8C%96%E4%BA%A4%E6%98%93/"><meta property="og:image" content="https://mugglewei.github.io/papermod-cover.png"><meta property="article:section" content="posts">
<meta property="article:published_time" content="2024-06-30T20:29:44+08:00">
<meta property="article:modified_time" content="2024-06-30T20:29:44+08:00">
<meta name=twitter:card content="summary_large_image">
<meta name=twitter:image content="https://mugglewei.github.io/papermod-cover.png">
<meta name=twitter:title content="什么是量化交易-暨驳斥近期网络上关于要打击量化的反智言论">
<meta name=twitter:description content="近期(2024-06-30)的 A 股又出现一波流畅的下跌走势，关于打击量化的反智言论再次充斥网络，比如
 集思录的帖子: 大家觉得量化是不是直接禁掉得了？ 以及政法大学刘纪鹏教授建议：暂停量化交易  这些帖子/视频连基本的事实概念都分不清(甚至无法分清量化交易、程序化交易、算法交易和高频交易是不同的概念)，却能言之凿凿的说为了广大投资者应该停止量化交易，实在令人啼笑皆非。而这些本该令人一笑了之的言论却有着大量的拥趸，实在很难令人置之不理。
所以这篇文章的目的是希望能做一个基础的科普，让大家能够对量化交易有一个简单的认识。
什么是量化 量化交易，顾名思义，就是以量化的方法来进行交易活动，那么什么是量化呢？其实理工科的学生肯定不会陌生，这里节选 2004 人教版高一物理课本的前言为大家释义：
 一天在树下玩耍，一只熟透了的苹果掉下来，他们就辩论起来：苹果是不是越落越快？不过他们很快就达成一致：是的，苹果越落越快。
紫珠说：“只说苹果越落越快，没什么了不起，谁能说出苹果下落怎么个越落越快法？”
黑柱说：“苹果越落越快，就是它的速度正比于落下的距离呗！”
白胖说：“我看是苹果的速度正比于落下的时间”
孩子们七嘴八舌，天色已晚，黄娃建议明天到游戏场去做实验，于是大家就散伙回家了。
&mldr;&mldr;
第二天，老师带孩子们到实验室，通过‘闪频仪’来记录小球下落每隔一定时间间隔的位置，通过实验数据记录，蓝仔发现规律并说：“其实我是吸取了白胖的想法，速度正比于走过的时间”
设第 1 秒末速度为 v，初速度为 0，所以平均速度为 v/2，走过的距离为 v/2 * 1 秒
第 2 秒末速度为 2v，初速度为 v，所以平均速度为 3v/2，走过的距离为 3v/2 * 1 秒
第 3 秒末速度为 3v，初速度为 2v，所以平均速度为 5v/2，走过的距离为 5v/2 * 1 秒
依此类推，为了取整数，可令 v = 2，于是小球在相继各秒下落距离之比就是 1:3:5:7:9:&mldr;，如果从零线起算各秒末的总路程，那就是整数的平方 1:4:9:16:25:&mldr;
&mldr;&mldr;
“物理学是探索自然界最基本、最普遍规律的科学，物理学的一般探索过程是通过观察和实验积累经验，在经验事实的基础上建立物理模型，提出(往往是猜测出)简洁的物理规律(物理学要求这些规律是定量化的，也就是用公式或数学表达的)，可用它们去预言未知现象，再用新的实验去检验这些物理模型和物理规律，去否定或进一步修正它们。”
 好了，通过上面短文，我们可以知道什么是量化，所以只有你有可量化的策略，并且按照策略去执行，都可以定义为量化交易。并且核心思想也是和物理实验一模一样，先提出假设(定性)，接着将其公式化(量化)，紧接着是实验(回测)，接着根据实验结果否定或进一步修正。
而且看到这里，相信你也就可以理解，为什么无论是国内的量化私募，还是国外的对冲基金都喜欢数学和物理专业的学生。
一个简单的量化策略 定性 很好，上面我们已经解释了量化这个词，那么现在我有了一个想法: 买入市场中的蓝筹股，忽略短期波动，始终满仓持有，那么拉长时间看，我能获取超过银行定期存款的利率。
量化 上面这段假设，我们可以将其理解为定性分析，为了对其进行实验，我们要对其进行定量。首先我们要确定取哪一年的多长的周期的定期存款利率，取次要定义什么是蓝筹股。
由于定期存款利率是实时变化的，我们不妨取近五年内，十年期国债收益率的月末收盘价最高值，即: 3.">
<script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://mugglewei.github.io/posts/"},{"@type":"ListItem","position":2,"name":"什么是量化交易-暨驳斥近期网络上关于要打击量化的反智言论","item":"https://mugglewei.github.io/posts/%E4%BB%80%E4%B9%88%E6%98%AF%E9%87%8F%E5%8C%96%E4%BA%A4%E6%98%93/"}]}</script>
<script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"什么是量化交易-暨驳斥近期网络上关于要打击量化的反智言论","name":"什么是量化交易-暨驳斥近期网络上关于要打击量化的反智言论","description":"近期(2024-06-30)的 A 股又出现一波流畅的下跌走势，关于打击量化的反智言论再次充斥网络，比如\n 集思录的帖子: 大家觉得量化是不是直接禁掉得了？ 以及政法大学刘纪鹏教授建议：暂停量化交易  这些帖子/视频连基本的事实概念都分不清(甚至无法分清量化交易、程序化交易、算法交易和高频交易是不同的概念)，却能言之凿凿的说为了广大投资者应该停止量化交易，实在令人啼笑皆非。而这些本该令人一笑了之的言论却有着大量的拥趸，实在很难令人置之不理。\n所以这篇文章的目的是希望能做一个基础的科普，让大家能够对量化交易有一个简单的认识。\n什么是量化 量化交易，顾名思义，就是以量化的方法来进行交易活动，那么什么是量化呢？其实理工科的学生肯定不会陌生，这里节选 2004 人教版高一物理课本的前言为大家释义：\n 一天在树下玩耍，一只熟透了的苹果掉下来，他们就辩论起来：苹果是不是越落越快？不过他们很快就达成一致：是的，苹果越落越快。\n紫珠说：“只说苹果越落越快，没什么了不起，谁能说出苹果下落怎么个越落越快法？”\n黑柱说：“苹果越落越快，就是它的速度正比于落下的距离呗！”\n白胖说：“我看是苹果的速度正比于落下的时间”\n孩子们七嘴八舌，天色已晚，黄娃建议明天到游戏场去做实验，于是大家就散伙回家了。\n\u0026hellip;\u0026hellip;\n第二天，老师带孩子们到实验室，通过‘闪频仪’来记录小球下落每隔一定时间间隔的位置，通过实验数据记录，蓝仔发现规律并说：“其实我是吸取了白胖的想法，速度正比于走过的时间”\n设第 1 秒末速度为 v，初速度为 0，所以平均速度为 v/2，走过的距离为 v/2 * 1 秒\n第 2 秒末速度为 2v，初速度为 v，所以平均速度为 3v/2，走过的距离为 3v/2 * 1 秒\n第 3 秒末速度为 3v，初速度为 2v，所以平均速度为 5v/2，走过的距离为 5v/2 * 1 秒\n依此类推，为了取整数，可令 v = 2，于是小球在相继各秒下落距离之比就是 1:3:5:7:9:\u0026hellip;，如果从零线起算各秒末的总路程，那就是整数的平方 1:4:9:16:25:\u0026hellip;\n\u0026hellip;\u0026hellip;\n“物理学是探索自然界最基本、最普遍规律的科学，物理学的一般探索过程是通过观察和实验积累经验，在经验事实的基础上建立物理模型，提出(往往是猜测出)简洁的物理规律(物理学要求这些规律是定量化的，也就是用公式或数学表达的)，可用它们去预言未知现象，再用新的实验去检验这些物理模型和物理规律，去否定或进一步修正它们。”\n 好了，通过上面短文，我们可以知道什么是量化，所以只有你有可量化的策略，并且按照策略去执行，都可以定义为量化交易。并且核心思想也是和物理实验一模一样，先提出假设(定性)，接着将其公式化(量化)，紧接着是实验(回测)，接着根据实验结果否定或进一步修正。\n而且看到这里，相信你也就可以理解，为什么无论是国内的量化私募，还是国外的对冲基金都喜欢数学和物理专业的学生。\n一个简单的量化策略 定性 很好，上面我们已经解释了量化这个词，那么现在我有了一个想法: 买入市场中的蓝筹股，忽略短期波动，始终满仓持有，那么拉长时间看，我能获取超过银行定期存款的利率。\n量化 上面这段假设，我们可以将其理解为定性分析，为了对其进行实验，我们要对其进行定量。首先我们要确定取哪一年的多长的周期的定期存款利率，取次要定义什么是蓝筹股。\n由于定期存款利率是实时变化的，我们不妨取近五年内，十年期国债收益率的月末收盘价最高值，即: 3.","keywords":["交易"],"articleBody":"近期(2024-06-30)的 A 股又出现一波流畅的下跌走势，关于打击量化的反智言论再次充斥网络，比如\n 集思录的帖子: 大家觉得量化是不是直接禁掉得了？ 以及政法大学刘纪鹏教授建议：暂停量化交易  这些帖子/视频连基本的事实概念都分不清(甚至无法分清量化交易、程序化交易、算法交易和高频交易是不同的概念)，却能言之凿凿的说为了广大投资者应该停止量化交易，实在令人啼笑皆非。而这些本该令人一笑了之的言论却有着大量的拥趸，实在很难令人置之不理。\n所以这篇文章的目的是希望能做一个基础的科普，让大家能够对量化交易有一个简单的认识。\n什么是量化 量化交易，顾名思义，就是以量化的方法来进行交易活动，那么什么是量化呢？其实理工科的学生肯定不会陌生，这里节选 2004 人教版高一物理课本的前言为大家释义：\n 一天在树下玩耍，一只熟透了的苹果掉下来，他们就辩论起来：苹果是不是越落越快？不过他们很快就达成一致：是的，苹果越落越快。\n紫珠说：“只说苹果越落越快，没什么了不起，谁能说出苹果下落怎么个越落越快法？”\n黑柱说：“苹果越落越快，就是它的速度正比于落下的距离呗！”\n白胖说：“我看是苹果的速度正比于落下的时间”\n孩子们七嘴八舌，天色已晚，黄娃建议明天到游戏场去做实验，于是大家就散伙回家了。\n……\n第二天，老师带孩子们到实验室，通过‘闪频仪’来记录小球下落每隔一定时间间隔的位置，通过实验数据记录，蓝仔发现规律并说：“其实我是吸取了白胖的想法，速度正比于走过的时间”\n设第 1 秒末速度为 v，初速度为 0，所以平均速度为 v/2，走过的距离为 v/2 * 1 秒\n第 2 秒末速度为 2v，初速度为 v，所以平均速度为 3v/2，走过的距离为 3v/2 * 1 秒\n第 3 秒末速度为 3v，初速度为 2v，所以平均速度为 5v/2，走过的距离为 5v/2 * 1 秒\n依此类推，为了取整数，可令 v = 2，于是小球在相继各秒下落距离之比就是 1:3:5:7:9:…，如果从零线起算各秒末的总路程，那就是整数的平方 1:4:9:16:25:…\n……\n“物理学是探索自然界最基本、最普遍规律的科学，物理学的一般探索过程是通过观察和实验积累经验，在经验事实的基础上建立物理模型，提出(往往是猜测出)简洁的物理规律(物理学要求这些规律是定量化的，也就是用公式或数学表达的)，可用它们去预言未知现象，再用新的实验去检验这些物理模型和物理规律，去否定或进一步修正它们。”\n 好了，通过上面短文，我们可以知道什么是量化，所以只有你有可量化的策略，并且按照策略去执行，都可以定义为量化交易。并且核心思想也是和物理实验一模一样，先提出假设(定性)，接着将其公式化(量化)，紧接着是实验(回测)，接着根据实验结果否定或进一步修正。\n而且看到这里，相信你也就可以理解，为什么无论是国内的量化私募，还是国外的对冲基金都喜欢数学和物理专业的学生。\n一个简单的量化策略 定性 很好，上面我们已经解释了量化这个词，那么现在我有了一个想法: 买入市场中的蓝筹股，忽略短期波动，始终满仓持有，那么拉长时间看，我能获取超过银行定期存款的利率。\n量化 上面这段假设，我们可以将其理解为定性分析，为了对其进行实验，我们要对其进行定量。首先我们要确定取哪一年的多长的周期的定期存款利率，取次要定义什么是蓝筹股。\n由于定期存款利率是实时变化的，我们不妨取近五年内，十年期国债收益率的月末收盘价最高值，即: 3.6%；接着，我们需要定义蓝筹股，不妨定义如下:\n先确定我们的股票池子:\n 非ST、*ST 沪深A股和红筹企业发行的存托凭证 若科创板证券、创业板证券：上市时间超过一年，其他证券：上市时间超过一个季度，除非该证券自上市以来日均总市值排在前 30 位  接着是定义一个筛选蓝筹的方法:\n 对样本空间内证券按照过去一年的日均成交金额由高到低排名，剔除排名后 50%的证券 对样本空间内剩余证券，按照过去一年的日均总市值由高到低排名，选取前 300 名的证券作为指数样本  接下来我们需要按固定的周期调整我们的持仓，这里我就定为每年 6 月和 12 月的第二个星期五的下一交易日好了\n回测 我们对上面的策略进行回测，这里暂时忽略手续费和滑点\n   起始时间 结束时间 复合年化 夏普     2014-06-27 2024-06-28 7.15% 0.175054    小结 好了，截至目前，我们完成了一个最为简单的策略，他通过买\"蓝筹\"的方式，获得了超过\"定存\"的收益。聪明的你应该已经反应过来了，这不就是全仓买入沪深 300 嘛！！！ 是的，你答对了，量化策略其实就在咱们的股民/基民朋友们身边，这里我可以随口说出几个分类：\n 按照市值分类: 沪深300，中证500，中证800，中证1000，中证2000 按照行业分类: 中证能源，中证原材料，中证工业指数，中证可选消费，中证主要消费，中证医药卫生，中证信息技术，中证公用事业…… 按风格分类: 成长指数，价值指数，红利指数……  除了这些指数类的策略外，其实股民朋友们经常喜欢用的网格策略，集思录网友经常挂在嘴边的双低转债等等，都可以算作是量化交易的范畴。\n算法交易 上面一小节已经讲述了简单策略的开发思路，但是忽略了一个细节，就是执行，即下单。当每当换仓时，我们希望能够以尽可能高的价格卖出需要卖的持仓，以尽可能低的价格买入需要买的持仓；而且通常基金换仓时，会有大量的仓位需要开/平，需要将单子拆的尽可能小，减少对市场的冲击，我们将这个拆弹的买卖步骤称为算法交易。\n现在，让我们来做个上个时代的美梦，你就是利弗莫尔或巴菲特(好吧，这里也许有点不恰当，毕竟利弗莫尔并不会在乎对市场的冲击)，现在你打电话给你的经纪商，要求他买入 20 万股茅台。一个小时之后，你的经纪商给你回电话说，任务完成，持仓成本现在是 k 元/股。那么问题来了，你如何判断你的经纪商和他的执行交易员团队的执行的结果如何呢？\n上面提到尽可能高的价格卖出，尽可能低的价格买入，这里有两个很常用的评价基准，分别为:\n TWAP(Time Weighted Average Price): 时间加权平均价格 VWAP(Volume weighted average price): 成交量加权平均价格  即你只需要按这段时间内的 TWAP 或 VWAP 的价格为基准，对比你的买入成本价，就可以评价你的算法交易的质量了。\n聪明的你读到这，也许又敏锐的注意到：执行下单不一定需要程序进行，由执行交易团队进行也是可以的。所以读到这里我们就可以知道：量化交易不一定是程序化交易，程序化交易只能表示执行阶段。\n这里多提一嘴，其实在上个月，监管的发文当中对算法交易进行了肯定的表述，我个人对此有不同看法，但由于利益相关，这里就不展开说了。\n因子 现在我们已经有了一个大方向上的思路(满仓持有沪深300)，并且也有了评价执行下单效果的方法，接着让我们更进一步，我们是否可以想一个策略，获取比沪深 300 更多的收益呢？比如:\n 将沪深 300 按照ROE排序，取排名前 n 个的标的持有 将沪深 300 按照股息率排名，取排民前 n 个的标的持有 将沪深 300 按照市值排名，取排民后 n 个的标的持有  我们当然可以通过回测来观察最终的结果，但是这其中有什么原理吗？ 为什么增加了额外的指标，能够得到更好的结果呢？我们不妨将我们添加的指标称为因子，通常情况下，无论是高频还是低频的策略，我们需要解释我们的因子，也就是找到因子和收益之间的关系，正相关、负相关还是没有关系？不过这里作为一个面向大众的科普文而不是教程，这里就不展开说明了。\n高频交易 现在，要进入最受争议，最让投机亏钱的散户们憎恨的高频交易环节了！那么高频交易和上面说的量化交易有本质的区别吗？并没有，它的方法论完全是一样的，提出假设，验证，再实验；寻找因子，计算因子和收益的相关性，并付诸实际。\n而且高频交易也是一个很广泛的称为，并不是单一的策略类型，甚至有些被大众错误的归类为高频交易的策略，其交易有时候并不频繁，典型的就是各类套利策略，例如\n ETF套利 商品的跨品种套利 商品的期现套利  而上述的套利策略，不仅不是有害的，更是市场运行必不可少的存在。\n不过也确实存在极短期内对市场造成冲击的策略，例如仅仅关注市场微观结构，例如针对订单簿不平衡做出吃单动作的策略，他们不同于做市策略，不仅无法提供流动性，还会短期内造成盘口价差扩大。但由于 T+1 的限制，在 A 股股票市场中，做 taker 高频策略的比例并不高，之前可转债疯狂过一阵，不过很快就被限制住了\n总结 截至目前，已经大致介绍了量化交易，可以看出，大部分的中长期策略，并不会对市场造成负面影响，相反，他们会通过基本面因子(例如高股息率，低波动，较高的价值，较高的质量)，持有优秀的企业，并且不受主观情绪的影响。而且国内量化私募卖的最多的一般都是指数增强类产品，这类产品几乎都处于满仓状态，并不存在某些人口中所谓的砸盘和蓄意影响市场。\n那么有人要说了，如果不是量化，那么现在应该怪罪谁？如果有个游戏，你只要参加了就可以赚到几个亿，如果你输了，惩罚是被罚掉几百万，并且退出这个游戏，不过没有性命之忧，如果你有实力参加这个游戏，你玩不玩？\n","wordCount":"169","inLanguage":"zh","datePublished":"2024-06-30T20:29:44+08:00","dateModified":"2024-06-30T20:29:44+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://mugglewei.github.io/posts/%E4%BB%80%E4%B9%88%E6%98%AF%E9%87%8F%E5%8C%96%E4%BA%A4%E6%98%93/"},"publisher":{"@type":"Organization","name":"MuggleWei","logo":{"@type":"ImageObject","url":"https://mugglewei.github.io/favicon.ico"}}}</script>
</head>
<body id=top>
<script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add('dark'):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove('dark'):window.matchMedia('(prefers-color-scheme: dark)').matches&&document.body.classList.add('dark')</script>
<header class=header>
<nav class=nav>
<div class=logo>
<a href=https://mugglewei.github.io/ accesskey=h title="MuggleWei (Alt + H)">MuggleWei</a>
<span class=logo-switches>
<button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>
</button>
</span>
</div>
<ul id=menu>
<li>
<a href=https://mugglewei.github.io/archives/ title=归档>
<span>归档</span>
</a>
</li>
<li>
<a href=https://mugglewei.github.io/search/ title=搜索>
<span>搜索</span>
</a>
</li>
<li>
<a href=https://mugglewei.github.io/series/ title=系列>
<span>系列</span>
</a>
</li>
<li>
<a href=https://mugglewei.github.io/categories/ title=分类>
<span>分类</span>
</a>
</li>
<li>
<a href=https://mugglewei.github.io/tags/ title=标签>
<span>标签</span>
</a>
</li>
</ul>
</nav>
</header>
<main class=main>
<article class=post-single>
<header class=post-header>
<div class=breadcrumbs><a href=https://mugglewei.github.io/>主页</a>&nbsp;»&nbsp;<a href=https://mugglewei.github.io/posts/>Posts</a></div>
<h1 class=post-title>
什么是量化交易-暨驳斥近期网络上关于要打击量化的反智言论
</h1>
<div class=post-meta><span title="2024-06-30 20:29:44 +0800 +0800">六月 30, 2024</span>
</div>
</header>
<div class=footer>
<p style=text-align:left>尽管每篇文章作者都努力编写与修改，但由于水平所限，错误和缺陷在所难免，还望读者能给予批评和指正</p>
<p style=text-align:right>mugglewei@gmail.com</p>
</div>
<div class=toc>
<details>
<summary accesskey=c title="(Alt + C)">
<span class=details>目录</span>
</summary>
<div class=inner><ul>
<li>
<a href=#%e4%bb%80%e4%b9%88%e6%98%af%e9%87%8f%e5%8c%96 aria-label=什么是量化>什么是量化</a></li>
<li>
<a href=#%e4%b8%80%e4%b8%aa%e7%ae%80%e5%8d%95%e7%9a%84%e9%87%8f%e5%8c%96%e7%ad%96%e7%95%a5 aria-label=一个简单的量化策略>一个简单的量化策略</a><ul>
<li>
<a href=#%e5%ae%9a%e6%80%a7 aria-label=定性>定性</a></li>
<li>
<a href=#%e9%87%8f%e5%8c%96 aria-label=量化>量化</a></li>
<li>
<a href=#%e5%9b%9e%e6%b5%8b aria-label=回测>回测</a></li>
<li>
<a href=#%e5%b0%8f%e7%bb%93 aria-label=小结>小结</a></li></ul>
</li>
<li>
<a href=#%e7%ae%97%e6%b3%95%e4%ba%a4%e6%98%93 aria-label=算法交易>算法交易</a></li>
<li>
<a href=#%e5%9b%a0%e5%ad%90 aria-label=因子>因子</a></li>
<li>
<a href=#%e9%ab%98%e9%a2%91%e4%ba%a4%e6%98%93 aria-label=高频交易>高频交易</a></li>
<li>
<a href=#%e6%80%bb%e7%bb%93 aria-label=总结>总结</a>
</li>
</ul>
</div>
</details>
</div>
<div class=post-content><p>近期(2024-06-30)的 A 股又出现一波流畅的下跌走势，关于打击量化的反智言论再次充斥网络，比如</p>
<ul>
<li>集思录的帖子: <a href=https://www.jisilu.cn/question/491397>大家觉得量化是不是直接禁掉得了？</a></li>
<li>以及政法大学刘纪鹏教授建议：<a href=https://weibo.com/1296760080/OhHh4diKQ>暂停量化交易</a></li>
</ul>
<p>这些帖子/视频连基本的事实概念都分不清(甚至无法分清量化交易、程序化交易、算法交易和高频交易是不同的概念)，却能言之凿凿的说为了广大投资者应该停止量化交易，实在令人啼笑皆非。而这些本该令人一笑了之的言论却有着大量的拥趸，实在很难令人置之不理。</p>
<p>所以这篇文章的目的是希望能做一个基础的科普，让大家能够对量化交易有一个简单的认识。</p>
<h2 id=什么是量化>什么是量化<a hidden class=anchor aria-hidden=true href=#什么是量化>#</a></h2>
<p>量化交易，顾名思义，就是以量化的方法来进行交易活动，那么什么是量化呢？其实理工科的学生肯定不会陌生，这里节选 2004 人教版高一物理课本的前言为大家释义：</p>
<blockquote>
<p>一天在树下玩耍，一只熟透了的苹果掉下来，他们就辩论起来：苹果是不是越落越快？不过他们很快就达成一致：是的，苹果越落越快。<br>
紫珠说：“只说苹果越落越快，没什么了不起，谁能说出苹果下落怎么个越落越快法？”<br>
黑柱说：“苹果越落越快，就是它的速度正比于落下的距离呗！”<br>
白胖说：“我看是苹果的速度正比于落下的时间”<br>
孩子们七嘴八舌，天色已晚，黄娃建议明天到游戏场去做实验，于是大家就散伙回家了。<br>
&mldr;&mldr;<br>
第二天，老师带孩子们到实验室，通过‘闪频仪’来记录小球下落每隔一定时间间隔的位置，通过实验数据记录，蓝仔发现规律并说：“其实我是吸取了白胖的想法，速度正比于走过的时间”<br>
设第 1 秒末速度为 v，初速度为 0，所以平均速度为 v/2，走过的距离为 v/2 * 1 秒<br>
第 2 秒末速度为 2v，初速度为 v，所以平均速度为 3v/2，走过的距离为 3v/2 * 1 秒<br>
第 3 秒末速度为 3v，初速度为 2v，所以平均速度为 5v/2，走过的距离为 5v/2 * 1 秒<br>
依此类推，为了取整数，可令 v = 2，于是小球在相继各秒下落距离之比就是 1:3:5:7:9:&mldr;，如果从零线起算各秒末的总路程，那就是整数的平方 1:4:9:16:25:&mldr;<br>
&mldr;&mldr;<br>
“物理学是探索自然界最基本、最普遍规律的科学，物理学的一般探索过程是通过观察和实验积累经验，在经验事实的基础上建立物理模型，提出(往往是猜测出)简洁的物理规律(物理学要求这些规律是<strong>定量化的</strong>，也就是用公式或数学表达的)，可用它们去预言未知现象，再用新的实验去检验这些物理模型和物理规律，去否定或进一步修正它们。”</p>
</blockquote>
<p>好了，通过上面短文，我们可以知道什么是<strong>量化</strong>，所以只有你有可量化的策略，并且按照策略去执行，都可以定义为量化交易。并且核心思想也是和物理实验一模一样，先提出假设(定性)，接着将其公式化(量化)，紧接着是实验(回测)，接着根据实验结果否定或进一步修正。<br>
而且看到这里，相信你也就可以理解，为什么无论是国内的量化私募，还是国外的对冲基金都喜欢数学和物理专业的学生。</p>
<h2 id=一个简单的量化策略>一个简单的量化策略<a hidden class=anchor aria-hidden=true href=#一个简单的量化策略>#</a></h2>
<h3 id=定性>定性<a hidden class=anchor aria-hidden=true href=#定性>#</a></h3>
<p>很好，上面我们已经解释了<strong>量化</strong>这个词，那么现在我有了一个想法: 买入市场中的蓝筹股，忽略短期波动，始终满仓持有，那么拉长时间看，我能获取超过银行定期存款的利率。</p>
<h3 id=量化>量化<a hidden class=anchor aria-hidden=true href=#量化>#</a></h3>
<p>上面这段假设，我们可以将其理解为定性分析，为了对其进行实验，我们要对其进行定量。首先我们要确定取哪一年的多长的周期的定期存款利率，取次要定义什么是蓝筹股。<br>
由于定期存款利率是实时变化的，我们不妨取近五年内，十年期国债收益率的月末收盘价最高值，即: 3.6%；接着，我们需要定义蓝筹股，不妨定义如下:</p>
<p>先确定我们的股票池子:</p>
<ul>
<li>非ST、*ST 沪深A股和红筹企业发行的存托凭证</li>
<li>若科创板证券、创业板证券：上市时间超过一年，其他证券：上市时间超过一个季度，除非该证券自上市以来日均总市值排在前 30 位</li>
</ul>
<p>接着是定义一个筛选蓝筹的方法:</p>
<ul>
<li>对样本空间内证券按照过去一年的日均成交金额由高到低排名，剔除排名后 50%的证券</li>
<li>对样本空间内剩余证券，按照过去一年的日均总市值由高到低排名，选取前 300 名的证券作为指数样本</li>
</ul>
<p>接下来我们需要按固定的周期调整我们的持仓，这里我就定为每年 6 月和 12 月的第二个星期五的下一交易日好了</p>
<h3 id=回测>回测<a hidden class=anchor aria-hidden=true href=#回测>#</a></h3>
<p>我们对上面的策略进行回测，这里暂时忽略手续费和滑点</p>
<img src=./img/H300.png>
<table>
<thead>
<tr>
<th>起始时间</th>
<th>结束时间</th>
<th>复合年化</th>
<th>夏普</th>
</tr>
</thead>
<tbody>
<tr>
<td>2014-06-27</td>
<td>2024-06-28</td>
<td>7.15%</td>
<td>0.175054</td>
</tr>
</tbody>
</table>
<h3 id=小结>小结<a hidden class=anchor aria-hidden=true href=#小结>#</a></h3>
<p>好了，截至目前，我们完成了一个最为简单的策略，他通过买"蓝筹"的方式，获得了超过"定存"的收益。聪明的你应该已经反应过来了，这不就是全仓买入沪深 300 嘛！！！
是的，你答对了，量化策略其实就在咱们的股民/基民朋友们身边，这里我可以随口说出几个分类：</p>
<ul>
<li>按照市值分类: 沪深300，中证500，中证800，中证1000，中证2000</li>
<li>按照行业分类: 中证能源，中证原材料，中证工业指数，中证可选消费，中证主要消费，中证医药卫生，中证信息技术，中证公用事业&mldr;&mldr;</li>
<li>按风格分类: 成长指数，价值指数，红利指数&mldr;&mldr;</li>
</ul>
<p>除了这些指数类的策略外，其实股民朋友们经常喜欢用的网格策略，集思录网友经常挂在嘴边的双低转债等等，都可以算作是量化交易的范畴。</p>
<h2 id=算法交易>算法交易<a hidden class=anchor aria-hidden=true href=#算法交易>#</a></h2>
<p>上面一小节已经讲述了简单策略的开发思路，但是忽略了一个细节，就是执行，即下单。当每当换仓时，我们希望能够以尽可能高的价格卖出需要卖的持仓，以尽可能低的价格买入需要买的持仓；而且通常基金换仓时，会有大量的仓位需要开/平，需要将单子拆的尽可能小，减少对市场的冲击，我们将这个拆弹的买卖步骤称为<strong>算法交易</strong>。</p>
<p>现在，让我们来做个上个时代的美梦，你就是利弗莫尔或巴菲特(好吧，这里也许有点不恰当，毕竟利弗莫尔并不会在乎对市场的冲击)，现在你打电话给你的经纪商，要求他买入 20 万股茅台。一个小时之后，你的经纪商给你回电话说，任务完成，持仓成本现在是 k 元/股。那么问题来了，你如何判断你的经纪商和他的执行交易员团队的执行的结果如何呢？</p>
<p>上面提到尽可能高的价格卖出，尽可能低的价格买入，这里有两个很常用的评价基准，分别为:</p>
<ul>
<li><strong>TWAP</strong>(Time Weighted Average Price): 时间加权平均价格</li>
<li><strong>VWAP</strong>(Volume weighted average price): 成交量加权平均价格</li>
</ul>
<p>即你只需要按这段时间内的 <strong>TWAP</strong> 或 <strong>VWAP</strong> 的价格为基准，对比你的买入成本价，就可以评价你的算法交易的质量了。</p>
<p>聪明的你读到这，也许又敏锐的注意到：执行下单不一定需要程序进行，由执行交易团队进行也是可以的。所以读到这里我们就可以知道：量化交易不一定是程序化交易，程序化交易只能表示执行阶段。</p>
<p>这里多提一嘴，其实在上个月，监管的发文当中对算法交易进行了肯定的表述，我个人对此有不同看法，但由于利益相关，这里就不展开说了。</p>
<h2 id=因子>因子<a hidden class=anchor aria-hidden=true href=#因子>#</a></h2>
<p>现在我们已经有了一个大方向上的思路(满仓持有沪深300)，并且也有了评价执行下单效果的方法，接着让我们更进一步，我们是否可以想一个策略，获取比沪深 300 更多的收益呢？比如:</p>
<ul>
<li>将沪深 300 按照ROE排序，取排名前 n 个的标的持有</li>
<li>将沪深 300 按照股息率排名，取排民前 n 个的标的持有</li>
<li>将沪深 300 按照市值排名，取排民后 n 个的标的持有</li>
</ul>
<p>我们当然可以通过回测来观察最终的结果，但是这其中有什么原理吗？ 为什么增加了额外的指标，能够得到更好的结果呢？我们不妨将我们添加的指标称为<strong>因子</strong>，通常情况下，无论是高频还是低频的策略，我们需要解释我们的因子，也就是找到因子和收益之间的关系，正相关、负相关还是没有关系？不过这里作为一个面向大众的科普文而不是教程，这里就不展开说明了。</p>
<h2 id=高频交易>高频交易<a hidden class=anchor aria-hidden=true href=#高频交易>#</a></h2>
<p>现在，要进入最受争议，最让投机亏钱的散户们憎恨的高频交易环节了！那么高频交易和上面说的量化交易有本质的区别吗？并没有，它的方法论完全是一样的，提出假设，验证，再实验；寻找因子，计算因子和收益的相关性，并付诸实际。</p>
<p>而且高频交易也是一个很广泛的称为，并不是单一的策略类型，甚至有些被大众错误的归类为高频交易的策略，其交易有时候并不频繁，典型的就是各类套利策略，例如</p>
<ul>
<li>ETF套利</li>
<li>商品的跨品种套利</li>
<li>商品的期现套利</li>
</ul>
<p>而上述的套利策略，不仅不是有害的，更是市场运行必不可少的存在。</p>
<p>不过也确实存在极短期内对市场造成冲击的策略，例如仅仅关注市场微观结构，例如针对订单簿不平衡做出吃单动作的策略，他们不同于做市策略，不仅无法提供流动性，还会短期内造成盘口价差扩大。但由于 T+1 的限制，在 A 股股票市场中，做 taker 高频策略的比例并不高，之前可转债疯狂过一阵，不过很快就被限制住了</p>
<h2 id=总结>总结<a hidden class=anchor aria-hidden=true href=#总结>#</a></h2>
<p>截至目前，已经大致介绍了量化交易，可以看出，大部分的中长期策略，并不会对市场造成负面影响，相反，他们会通过基本面因子(例如高股息率，低波动，较高的价值，较高的质量)，持有优秀的企业，并且不受主观情绪的影响。而且国内量化私募卖的最多的一般都是指数增强类产品，这类产品几乎都处于满仓状态，并不存在某些人口中所谓的砸盘和蓄意影响市场。</p>
<p>那么有人要说了，如果不是量化，那么现在应该怪罪谁？如果有个游戏，你只要参加了就可以赚到几个亿，如果你输了，惩罚是被罚掉几百万，并且退出这个游戏，不过没有性命之忧，如果你有实力参加这个游戏，你玩不玩？</p>
</div>
<footer class=post-footer>
<ul class=post-tags>
<li><a href=https://mugglewei.github.io/tags/%E4%BA%A4%E6%98%93/>交易</a></li>
</ul>
<nav class=paginav>
<a class=prev href=https://mugglewei.github.io/posts/%E5%87%BD%E6%95%B0%E5%AE%9A%E4%B9%89%E5%8F%91%E5%B1%95%E6%9C%89%E6%84%9F/>
<span class=title>« 上一页</span>
<br>
<span>函数概念的演化</span>
</a>
</nav>
</footer>
</article>
<script type=text/javascript src=/viz@v1.8.1/viz.js></script>
<script type=text/javascript>(function(){var a="language-graphviz";Array.prototype.forEach.call(document.querySelectorAll("[class^="+a+"]"),function(a){var b="dot",c=(new DOMParser).parseFromString(Viz(a.innerText,{format:"svg",engine:b}),"image/svg+xml");a.parentNode.insertBefore(c.documentElement,a),a.style.display='none',a.parentNode.style.setProperty("background-color","white","important")})})()</script>
</main>
<footer class=footer>
<span>&copy; 2024 <a href=https://mugglewei.github.io/>MuggleWei</a></span>
<span>
Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a>
</span>
</footer>
<a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a>
<script>let menu=document.getElementById('menu');menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(a=>{a.addEventListener("click",function(b){b.preventDefault();var a=this.getAttribute("href").substr(1);window.matchMedia('(prefers-reduced-motion: reduce)').matches?document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView({behavior:"smooth"}),a==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${a}`)})})</script>
<script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script>
<script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove('dark'),localStorage.setItem("pref-theme",'light')):(document.body.classList.add('dark'),localStorage.setItem("pref-theme",'dark'))})</script>
<script>document.querySelectorAll('pre > code').forEach(b=>{const c=b.parentNode.parentNode,a=document.createElement('button');a.classList.add('copy-code'),a.innerText='复制';function d(){a.innerText='已复制！',setTimeout(()=>{a.innerText='复制'},2e3)}a.addEventListener('click',e=>{if('clipboard'in navigator){navigator.clipboard.writeText(b.textContent),d();return}const a=document.createRange();a.selectNodeContents(b);const c=window.getSelection();c.removeAllRanges(),c.addRange(a);try{document.execCommand('copy'),d()}catch(a){}c.removeRange(a)}),c.classList.contains("highlight")?c.appendChild(a):c.parentNode.firstChild==c||(b.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?b.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(a):b.parentNode.appendChild(a))})</script>
</body>
</html>